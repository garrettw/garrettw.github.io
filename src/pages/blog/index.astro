---
// Layout import â€” provides basic page elements: <head>, <nav>, <footer> etc.
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import { Image } from 'astro:assets';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout>
    <main>
        <section>
            <ul>
                {
                    posts.filter((post) => post.data.pubDate && post.data.pubDate < new Date())
                    .map((post) => (
                        <li>
                            <a href={`/blog/${post.id}/`}>
                                <h4 class="title">{post.data.title}</h4>
                                <p class="date">
                                    <FormattedDate date={post.data.pubDate || new Date()} />
                                </p>
                            </a>
                        </li>
                    ))
                }
            </ul>
        </section>
    </main>
</BaseLayout>
